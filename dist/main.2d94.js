(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){e.exports=n.p+"a9a323fd5ae656a5e7131b60e27fe204.svg"},function(e,t,n){},,function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){e.exports=n.p+"67ce7d5a833d9fc83f623c431a6760ce.svg"},function(e,t,n){},,,function(e,t,n){},,function(e,t,n){e.exports=n.p+"7df62acafa694b8c1a4a0528fb6546cc.svg"},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){e.exports=n.p+"f576168014a0a063e9a9067746d52afe.svg"},function(e,t,n){e.exports=n.p+"faf9092c22feba281cd0b857153cf2ac.svg"},function(e,t,n){e.exports=n.p+"d192d5a8c77493a9b9a15e4bad4856b1.svg"},function(e,t,n){e.exports=n.p+"abc73620aa65da15acbe08e163313e69.svg"},function(e,t,n){e.exports=n.p+"7b537845db343dc95978342656f3dc31.svg"},function(e,t,n){e.exports=n.p+"2d2ff47c522a67f3797a22229173805c.svg"},function(e,t,n){e.exports=n.p+"d6a663b6ce16afbdddedd183bfc0b95a.svg"},function(e,t,n){e.exports=n.p+"698ae12ca4406b41dd2c2b5f4188f232.svg"},function(e,t,n){e.exports=n.p+"11177e33f8a5453cc4a2af006bf9f0cc.svg"},function(e,t,n){e.exports=n.p+"7eeb4128a906d97fc444f2ec6f7f2a1e.svg"},function(e,t,n){e.exports=n.p+"2b61df562f9ceba376a217086ea0a4b8.svg"},function(e,t,n){e.exports=n.p+"7613d518f4a31149fa31d1ef8fa9c9c8.svg"},function(e,t,n){e.exports=n.p+"ab790a27815c6aedaebbd55078126d7a.svg"},function(e,t,n){e.exports=n.p+"8046cef8ebd3096cc0a092095a911f45.svg"},function(e,t,n){e.exports=n.p+"374c11fb9598eacab7db87323f15d7d7.svg"},function(e,t,n){e.exports=n.p+"eec13f2e2f2341c89b52487b6c6f5531.svg"},function(e,t,n){e.exports=n.p+"9da5b3a25ce2afe1ff9a69a9a480b099.svg"},function(e,t,n){e.exports=n.p+"7b799210bff006a8a7cdc13de038aa1c.svg"},function(e,t,n){e.exports=n.p+"fa7e619e21d79bd64b2932efa099a21a.svg"},function(e,t,n){e.exports=n.p+"29fd5a207752c8fb18bdeffe7c7f8c24.svg"},function(e,t,n){e.exports=n.p+"addf317cff816fe4d291212403763c59.svg"},function(e,t,n){e.exports=n.p+"85cd94bb43adfe2943685ae19c1ae96e.svg"},function(e,t,n){e.exports=n.p+"86e690f3ad2e18fae51f04c2e64f688d.svg"},function(e,t,n){e.exports=n.p+"8ca025b877e870030ea3af1681978e68.svg"},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);n(25);var r=n(0),a=n.n(r),i=n(4),o=n.n(i),l=(n(1),n(104)),s=n(20),c=n.n(s).a.initializeApp({apiKey:"AIzaSyDsmWxFexrd890dUvpA313qvxvcjDRp1Ok",authDomain:"wowbridge88.firebaseapp.com",databaseURL:"https://wowbridge88.firebaseio.com",projectId:"wowbridge88",storageBucket:"wowbridge88.appspot.com",messagingSenderId:"862342003288"}),u={auth:c.auth(),onAuthChanged:function(e){c.auth().onAuthStateChanged(function(t){t?e(t):console.log("no one login")})},getNodeByPathOnce:function(e,t){return c.database().ref(e).once("value",t)},getNodeByPath:function(e,t){return c.database().ref(e).on("value",t)},pushDataByPath:function(e,t){return c.database().ref(e).push(t)},cancelListenDataChange:function(e,t){return c.database().ref(e).off("value",t)},listenPathChildren:function(e,t){return c.database().ref(e).off("value")},setNodeByPath:function(e,t){return c.database().ref(e).set(t)},getDataByPathOnce:function(e,t){return c.database().ref(e).once("value",t)},getNewChildKey:function(e){return c.database().ref().child(e).push().key},updateTableDataByID:function(e,t){c.database().ref("tables/"+e+"/").set(t)},updateTableGameDataByPath:function(e,t){c.database().ref("tables/"+e).set(t)},setTableListData:function(e,t){c.database().ref("tableList/"+e+"/").set(t)},getChatRoomById:function(e){return new Promise(function(t,n){u.getNodeByPath("chatroom/"+e+"/",function(e){return t(e.val())})})},getTableByLinkId:function(e){return new Promise(function(t,n){u.getNodeByPath("tableList/"+e,function(e){if(e.val())return u.getNodeByPath("tables/"+e.val().id+"/",function(e){return t(e.val())});throw new Error("NO TABLE DATA IN DB")})}).catch(function(e){return console.log(e.message)})},signInWithEmailAndPassword:function(e){var t=e.email,n=e.password;return c.auth().signInWithEmailAndPassword(t,n)},getCurrentUser:function(){return new Promise(function(e,t){u.auth.onAuthStateChanged(function(n){n?u.getDataByPathOnce("users/"+n.uid,function(t){e({user:n,userInfo:t.val()})}):t(null)})})}},f=(n(23),n(54),n(103),n(10),n(61),n(66)),p=n(22),d=n.n(p),m=n(13),h=n(19),b=function(e){var t=e.scale,n=e.fill,r=void 0===n?"#FF525D":n;return a.a.createElement(E,{scale:t,ratio:.89,fill:r},a.a.createElement("path",{d:"M70.9643211,0 C59.2565148,0 53.056072,5.64335169 49.9709368,10.1546618 C46.889795,5.64335169 40.6986702,0 29.0152682,0 C15.0405332,0 0,9.29808951 0,29.7129874 C0,37.7588224 1.74734105,44.1438566 5.84192287,51.0638602 C9.82779506,57.7993304 18.2685439,66.1002296 30.9298889,75.7372219 C35.8715185,79.4984213 40.4235682,82.6625486 43.3724836,84.6547112 C49.0391399,88.4833363 49.2609963,88.5228158 49.9456452,88.5232594 C49.9802548,88.5241466 50.0135332,88.5245902 50.0468117,88.5245902 C50.6941887,88.5245902 51.1401201,88.3183208 56.5574098,84.6764471 C59.5081,82.6922691 64.0641431,79.5401188 69.0102098,75.7873476 C81.6870849,66.1698733 90.1513504,57.851674 94.1682825,51.0643038 C98.2557649,44.1571643 100,37.7712429 100,29.713431 C100,9.29808951 84.9488177,0 70.9643211,0 Z"}))},y=function(e){var t=e.scale,n=e.fill,r=void 0===n?"#222":n;return a.a.createElement(E,{scale:t,ratio:1,fill:r},a.a.createElement("path",{d:"M88.5085925,35.4545714 C84.7618726,29.0791639 76.8279859,21.2225289 64.9275728,12.1017285 C60.2811897,8.54098888 56.0030971,5.54662558 53.2315338,3.66150342 C47.8489868,0 47.6921609,0 47.0310732,0 C46.3716539,0 46.2152451,0 40.8347835,3.64219036 C38.0615518,5.52017509 33.7788713,8.50362231 29.1295686,12.0555451 C17.2145573,21.1574523 9.25814768,29.0300415 5.48264861,35.4541516 C1.63958096,41.9928804 0,48.0361874 0,55.6623252 C0,74.9846174 14.1481113,83.785073 27.2935382,83.785073 C33.059808,83.785073 37.4025496,82.3177007 40.6500126,80.3074635 L37.0551136,94 L56.8014075,94 L53.1693874,80.1668141 C56.4343682,82.2488454 60.8367536,83.785073 66.7252308,83.785073 C79.8614817,83.785073 94,74.9846174 94,55.6623252 C94,48.0475233 92.3579165,42.0042164 88.5085925,35.4545714 Z",fill:r}))},v=function(e){var t=e.scale,n=e.fill,r=void 0===n?"#FF525D":n;return a.a.createElement(E,{scale:t,ratio:1,fill:r},a.a.createElement("polygon",{points:"46.5 0 0 50 46.5 100 93 50"}))},g=function(e){var t=e.scale,n=e.fill,r=void 0===n?"#222":n;return a.a.createElement(E,{scale:t,ratio:.98,fill:r},a.a.createElement("path",{d:"M70.3555185,31.9345189 C71.174537,29.4903991 71.587963,26.9404062 71.587963,24.3163882 C71.587963,10.9083748 60.5577593,0 47,0 C33.4422407,0 22.412037,10.9083748 22.412037,24.3163882 C22.412037,26.9404062 22.825463,29.4903991 23.6444815,31.9345189 C10.5223426,32.426872 0,43.137703 0,56.2332616 C0,69.641275 11.0302037,80.5496498 24.587963,80.5496498 C30.872037,80.5496498 36.6116944,78.2040867 40.9631111,74.3539201 L35.6686481,92.1010101 L58.1820833,92.1010101 L52.8323519,74.1692877 C57.2077037,78.12834 63.0287407,80.5496498 69.412037,80.5496498 C82.9697963,80.5496498 94,69.641275 94,56.2332616 C94,43.137703 83.4776574,32.426872 70.3555185,31.9345189 Z",fill:r}))},E=function(e){var t=e.children,n=e.ratio,r=e.scale,i=e.fill,o=100*r,l=Math.floor(o*n);return a.a.createElement("div",null,a.a.createElement("svg",{width:o+"px",height:l+"px",viewBox:"0 0 "+o+" "+l},a.a.createElement("g",{fill:i,transform:"scale("+r+")"},t)))},w=52,O=13,_="YOU WIN",T="YOU LOSE",N={0:function(e,t){return a.a.createElement(g,{scale:e,fill:t})},1:function(e,t){return a.a.createElement(v,{scale:e,fill:t})},2:function(e,t){return a.a.createElement(b,{scale:e,fill:t})},3:function(e,t){return a.a.createElement(y,{scale:e,fill:t})},4:function(e){return a.a.createElement("div",null,"NT")}},k=[2,3,4,5,6,7,8,9,10,"J","Q","K","A"],P={deal:0,bid:{isDb:!1,isRdb:!1,trick:0,trump:-1},order:-1,isGameOver:!1},C=[-1,-1,-1,-1],j="join",A="auction",U="close",I=["south","west","north","east"],S=["ü§î","ü§£","ü§©","üòù","üòç","üòµ","üôÑ","ü§≠","üò±","ü§∑","üëç","üëé","üëØ","üëÄ","üê∑","üéâ","üéÉ","üç∫","üî•","üõÅ"],R=function(e,t){return L.dispatch(Object.assign({},{type:e},t))},D=function(e,t){switch(e){case"CREATE_USER":u.setNodeByPath("/users/"+t.uid,t.userInfo);break;case"CREATE_TABLE":var n=t.currentUser;if(!t.currentUser.uid)return void console.log("user is not login");var r=(new Date).getTime(),a=C.slice(0),i={};i[""+n.uid]={displayName:n.displayName},a[0]=t.currentUser.uid;var o=u.getNewChildKey("tables"),l=t.tableRef||r,s={timeStamp:l,createTime:l,gameState:j,id:o,linkId:l,game:P,playerInfo:Object.assign({},{"C1-robot":{displayName:"C1-robot"},"C2-robot":{displayName:"C2-robot"},"C3-robot":{displayName:"C3-robot"},"-1":{displayName:""}},i),players:a,ready:[!0,!1,!1,!1]};u.setNodeByPath("tables/"+o,s),u.setTableListData(l,{id:o,players:a,playerInfo:Object.assign({},{"C1-robot":{displayName:"C1-robot"},"C2-robot":{displayName:"C2-robot"},"C3-robot":{displayName:"C3-robot"},"-1":{displayName:""}},i)});break;case"CREATE_NEW_GAME":var c=t.table,f=c.players,p=Object.assign({},c),d=p.record,m=p.game;d?d.push(m):d=[m];var h=f.map(function(e){return e.includes("-robot")?-1:e}),b=(new Date).getTime();p.record=d,p.createTime=b,p.game=Object.assign({},P),p.ready=[!0,!1,!1,!1],p.timeStamp=b,p.gameState=j,p.players=h,u.setNodeByPath("tables/"+p.id,p);break;case"START_GAME":var y=t.table,v=Object.assign({},y),g=[1,2,3],E=0,w=v.players.map(function(e){return-1===e?"C"+g[E++]+"-robot":e}),O=Object.assign({},v,{ready:[!0,!0,!0,!0]},{players:w},{gameState:A},{timeStamp:(new Date).getTime()});u.setNodeByPath("tables/"+O.id,O),u.setNodeByPath("tableList/"+y.linkId,{id:y.id,players:w,playerInfo:y.playerInfo});break;case"READY_A_PLAYER":var _=t.table,T=t.playerIndex,N=Object.assign({},_);N.ready[T]=!0,N.ready.every(function(e){return!0===e})&&(N.gameState=A),u.setNodeByPath("tables/"+_.id,N);break;case"UPDATE_TABLE_TIMESTAMP":u.setNodeByPath("tables/"+t.id+"/timeStamp/",(new Date).getTime());break;case"ADD_NEW_DECK_TO_TABLE":var k=t.cards,U=t.table,I=Object.assign({},U.game,{cards:k});u.updateTableDataByID(U.id+"/game/",I);break;case"UPDATE_WINNER_CARD":var S=t.table,R=Object.assign({},S.game),D=R.cards;R.order=t.order;var L=D.findIndex(function(e){return e.value===t.winnerCard.value}),x=t.winnerCard;x.isWin=!0,R.deal=x.player,D[L]=x,51===t.order&&(R.isGameOver=!0),u.updateTableDataByID(S.id+"/game/",R);break;case"UPDATE_CURRENT_TRICK":var B=t.table,M=t.order,W=t.deal,z=B.game;u.updateTableGameDataByPath(B.id+"/game/order/",M);var G=z.cards,H=G.findIndex(function(e){return e.value===t.value}),F=G[H];F.order=M,u.updateTableGameDataByPath(B.id+"/game/deal/",W),u.updateTableGameDataByPath(B.id+"/timeStamp/",(new Date).getTime()),0===F.trick&&(F.trick=t.maxTrick,F.player=(W+4-1)%4,u.updateTableGameDataByPath(B.id+"/game/cards/"+H,F));break;case"ADD_VIEWER_TO_TABLE":var Y=t.currentUser,K=t.table,J=t.color,V=(K.linkId,K.id);u.setNodeByPath("tables/"+V+"/viewers/"+Y.uid,J),u.updateTableGameDataByPath(V+"/timeStamp/",(new Date).getTime());break;case"ADD_PLAYER_TO_TABLE":var Z=t.currentUser,q=t.table,Q=t.emptySeatIndex,X=t.color,$=q.linkId,ee=q.id,te=q.players;u.setNodeByPath("tables/"+ee+"/players/"+Q,Z.uid),u.setNodeByPath("tables/"+ee+"/playerInfo/"+Z.uid,{displayName:Z.displayName}),u.setNodeByPath("tables/"+ee+"/viewers/"+Z.uid,X);var ne=te.slice(0);ne[Q]=Z.uid,u.setNodeByPath("tableList/"+$+"/players",ne),u.setNodeByPath("tableList/"+$+"/playerInfo/"+Z.uid,{displayName:Z.displayName}),u.updateTableGameDataByPath(ee+"/timeStamp/",(new Date).getTime());break;case"UPDATE_AUCTION":u.updateTableGameDataByPath(t.table.id+"/game/",t.game),u.updateTableGameDataByPath(t.table.id+"/timeStamp/",(new Date).getTime());break;case"SEND_MESSAGE_TO_CHATROOM":t.message;var re=t.currentUser,ae=t.table,ie=(new Date).getTime(),oe={};oe.isPlayer=ae.players.some(function(e){return e===re.uid}),oe.content=t.message,oe.uid=re.uid,oe.displayName=re.displayName,u.setNodeByPath("chatroom/"+ae.id+"/message/"+ie+"/",oe);default:return null}};u.getNodeByPath("tableList",function(e){return R("FETCH_TABLE_LIST",{tableList:e.val()})}),u.getNodeByPath("users",function(e){return R("UPDATE_USER_LIST",{userList:e.val()})});var L=Object(m.b)(function(e,t){switch(t.type){case"UPDATE_USER_INFO":if(!t)return;return Object.assign({},e,{user:t.user,userInfo:t.userInfo});case"UPDATE_USER_LIST":return Object.assign({},e,{userList:t.userList});case"UPDATE_LOADING_STATE":return Object.assign({},e,{isLoad:t.isLoad});case"FETCH_TABLE_DATA":return Object.assign({},e,{tables:t.tables});case"UPDATE_CHAT_ROOM":return Object.assign({},e,{chatroom:t.chatroom});case"UPDATE_TABLE_DATA":var n=t.table,r=e.tables,a=Object.assign({},r);return a[n.id]=n,Object.assign({},e,{tables:a});case"UPDATE_CURRENT_TABLE_ID":return Object.assign({},e,{currentTableId:t.currentTableId});case"FETCH_TABLE_LIST":return Object.assign({},e,{tableList:t.tableList});default:return e}},{currentUser:null,isLoad:!1,tables:{},currentTableId:null,closeTables:{}},Object(m.a)(h.a));u.getCurrentUser().then(function(e){R("UPDATE_LOADING_STATE",{isLoad:!0}),R("UPDATE_USER_INFO",e)});n(74);var x=n(111),B=n.n(x),M=n(112),W=n.n(M),z=n(113),G=n.n(z),H=n(114),F=n.n(H),Y=n(115),K=n.n(Y),J=n(116),V=n.n(J),Z=n(117),q=n.n(Z),Q=n(118),X=n.n(Q),$=n(119),ee=n.n($),te=n(120),ne=n.n(te),re=n(121),ae=n.n(re),ie=n(122),oe=n.n(ie),le=n(123),se=n.n(le),ce=n(124),ue=n.n(ce),fe=n(125),pe=n.n(fe),de=n(126),me=n.n(de),he=n(127),be=n.n(he),ye=n(128),ve=n.n(ye),ge=n(129),Ee=n.n(ge),we=n(130),Oe=n.n(we),_e=n(131),Te=n.n(_e),Ne=(n(134),n(132)),ke=n.n(Ne),Pe=n(133),Ce=n.n(Pe),je=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ae={0:B.a,1:W.a,2:G.a,3:F.a,4:K.a,5:V.a,6:q.a,7:X.a,8:ee.a,9:ne.a,10:ae.a,11:oe.a,12:se.a,13:ue.a,14:pe.a,15:me.a,16:be.a,17:ve.a,18:Ee.a,19:Oe.a,20:Te.a},Ue=Object.keys(Ae).length,Ie=function(e){var t=e.name,n=void 0===t?"":t,r=e.size,i=void 0===r?40:r,o=e.disabled,l=void 0!==o&&o,s=e.offset,c=void 0===s?16:s,u=e.border,f=void 0!==u&&u,p=(e.isCurrentUser,e.styleName),d=void 0===p?null:p,m=e.robotMargin,h=void 0===m?0:m,b=e.robotOffset,y=void 0===b?-5:b,v=Ue;n.length&&(v=n.split("").map(function(e){return e.charCodeAt(e)||+e}).reduce(function(e,t){return e+t},0)%Ue);var g=Ae[v];return n.includes("-robot")&&(g=ke.a),a.a.createElement("div",{className:"thumbnail disabled "+d,style:{width:i,height:i,borderRadius:i}},a.a.createElement("div",{className:f?"thumbnail-inner thumbnail-outline":"thumbnail-inner"},a.a.createElement("div",{className:"border-style"},a.a.createElement("img",{className:l?"disabled":"",style:{marginTop:h},width:f?i-c+5+y:i-c+y,src:g}))))},Se=function(e){var t=e.name,n=void 0===t?"":t,r=e.size,i=void 0===r?40:r,o=e.disabled,l=void 0!==o&&o,s=e.offset,c=void 0===s?16:s,u=e.border,f=void 0!==u&&u,p=e.isCurrentUser,d=void 0!==p&&p,m=e.styleName,h=void 0===m?null:m;return a.a.createElement("div",{className:"thumbnail-with-tag"},a.a.createElement("div",{className:"tag"}),a.a.createElement(Ie,{name:n,size:i,disabled:l,offset:c,border:f,isCurrentUser:d,styleName:h}))},Re=function(e){var t=e.players,n=e.size,r=e.teamOrder,i=t.filter(function(e,t){return t%2===r}).map(function(e,t){return a.a.createElement(Ie,{key:"member-"+t,name:e,size:n})});return a.a.createElement("div",{className:"thumbnail-group"},i)},De=function(e){var t=e.players,n=e.currentUser,r=e.size,i=e.styleObj,o=e.teamOrder,l=(e.styleOb,e.offset),s=t.filter(function(e,t){return t%2===o}).map(function(e,t){return e===n.displayName?a.a.createElement(Se,{key:"member-"+t,offset:l,name:e,size:r}):a.a.createElement(Ie,{offset:l,key:"member-"+t,name:e,size:r})});return a.a.createElement("div",{className:"thumbnail-group",style:i},s)},Le=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={posY:Math.floor(40*Math.random()),position:0,stop:!1,isGoingUp:!0,name:"enter"},n.changeImg=n.changeImg.bind(n),n.timer=setInterval(n.changeImg,20),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),je(t,[{key:"componentDidMount",value:function(){this.mount=!0}},{key:"componentWillUnmount",value:function(){this.mount=!1}},{key:"changeImg",value:function(){if(this.mount){var e=this.state.posY;this.state.posY>50?this.setState({isGoingUp:!1}):this.state.posY<-50&&this.setState({isGoingUp:!0});var t=void 0;this.state.isGoingUp?t=Math.floor(2*Math.random()):!1===this.state.isGoingUp&&(t=Math.floor(-3*Math.random())),this.setState({posY:e+t})}}},{key:"componentDidUpdate",value:function(e){this.mount&&this.props.stop!==e.stop&&!0===this.props.stop&&(this.setState({stop:!0,posY:40}),clearInterval(this.timer))}},{key:"render",value:function(){var e=this.props.size||30,t=this.props.disabled||!1,n=(this.state.position,t?"disabled "+this.state.name:this.state.name),r=a.a.createElement("img",{className:n,style:{transform:"translateY("+this.state.posY+"%) scale(1.07)"},width:e-16,src:Ce.a});return a.a.createElement("div",{className:"waiting-thumbnail disabled",style:{width:e,height:e,borderRadius:e}},r)}}]),t}(),xe=(n(109),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Be=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOpen:!1},n.handleSignOut=n.handleSignOut.bind(n),n.closePanel=n.closePanel.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),xe(t,[{key:"handleSignOut",value:function(){this.closePanel(),u.auth.signOut()}},{key:"closePanel",value:function(){this.setState({isOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props.currentUser;return a.a.createElement("div",{className:"user-state-panel"},a.a.createElement("div",{className:this.state.isOpen?"Login-state-btn open-btn":"Login-state-btn",onClick:function(){return e.setState({isOpen:!e.state.isOpen})}},a.a.createElement(Se,{isCurrentUser:!0,size:40,offset:5,name:t&&t.displayName||""}),a.a.createElement("div",null,a.a.createElement("h6",null,t.displayName),a.a.createElement("span",null,"Á∑ö‰∏ä"))),a.a.createElement("div",{className:this.state.isOpen?"options open":"options"},a.a.createElement(f.a,{onClick:this.handleSignOut,to:"/"},"ÁôªÂá∫")))}}]),t}(),Me=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var We=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.props.currentUser||n.props.getUserAuthInfo().then(function(e){console.log("user login")}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Me(t,[{key:"render",value:function(){var e,t=a.a.createElement(Be,{currentUser:this.props.currentUser}),n=a.a.createElement("div",{className:"register-btn-groups"},a.a.createElement(f.a,{to:"/signup"},"Ë®ªÂÜä"),a.a.createElement(f.a,{to:"/login"},"ÁôªÂÖ•"));e=this.props.currentUser&&this.props.currentUser.uid?t:n;var r=this.props.roomNum,i=null;return r&&(i="Ê°åËôü "+(r=""+r).slice(r.length-3,r.length)),a.a.createElement("header",{className:this.props.isTableColor?"table-header":""},a.a.createElement("div",null,a.a.createElement(f.a,{to:"/"},a.a.createElement("img",{src:d.a}),a.a.createElement("h1",null,"Wow Bridge"))),a.a.createElement("div",null,a.a.createElement("h3",null,i)),a.a.createElement("div",null,a.a.createElement("div",null,e)))}}]),t}(),ze=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ge=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={name:"",email:"",password:"",redirect:!1},n.redirectToLobbyIfLogin(),n.redirectToLobbyIfLogin=n.redirectToLobbyIfLogin.bind(n),n.handleLogin=n.handleLogin.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),ze(t,[{key:"redirectToLobbyIfLogin",value:function(){var e=this;u.getCurrentUser().then(function(t){if(t)return e.setState({redirect:!0}),t;throw new Error("NO CURRENT USER")}).catch(function(e){console.log(e)})}},{key:"handleLogin",value:function(){var e=this,t=this.state,n=t.email,r=t.password;n&&r&&u.signInWithEmailAndPassword(this.state).then(function(t){e.setState({redirect:!0})}).catch(function(t){e.setState({error:t&&t.message})})}},{key:"render",value:function(){var e=this;return this.state.redirect?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",null,a.a.createElement(We,{getUserAuthInfo:this.props.getUserAuthInfo,currentUser:this.props.currentUser}),a.a.createElement("div",{className:"singup-wrapper"},a.a.createElement("div",{className:"signup login"},a.a.createElement("h2",null,"ÁôªÂÖ•"),a.a.createElement("div",null,a.a.createElement("h3",null,"ÈõªÂ≠ê‰ø°ÁÆ±"),a.a.createElement("input",{type:"text",placeholder:"Email address",onChange:function(t){e.setState({email:t.currentTarget.value})},value:this.state.email})),a.a.createElement("div",null,a.a.createElement("h3",null,"ÂØÜÁ¢º"),a.a.createElement("input",{placeholder:"Enter password",type:"password",onChange:function(t){e.setState({password:t.currentTarget.value})},value:this.state.password})),a.a.createElement("div",{className:"error-text"},this.state.error||""),a.a.createElement("div",null,a.a.createElement("div",{className:"btn-group"},a.a.createElement("button",{onClick:this.handleLogin,className:"btn-style-round"},"ÁôªÂÖ•"))))))}}]),t}(),He=(n(16),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t="abcdefghijklmnopqrstuvxyzABCDEFGHIJKLMNOPQRSTUVXYZ";return Array.from({length:e}).fill(0).map(function(e){return t[Math.floor(Math.random()*(t.length-1))]}).join("")}),Fe=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},Ye=(n(50),function(e){var t=e.value;return a.a.createElement("div",{className:"abbbbbbbbbbbbb"},a.a.createElement(Ke,{flipUp:!0,value:t}))}),Ke=function(e){var t=e.value,n=e.evt,r=void 0===n?null:n,i=e.flipUp,o=e.name,l=void 0===o?null:o,s=Math.floor(t/O),c=l?"card-wrapper "+l:"card-wrapper";return i?a.a.createElement("div",{className:c,onClick:function(){r&&r(t)}},a.a.createElement("div",{className:"card flip-up"},a.a.createElement("div",{className:"card-inner"},a.a.createElement("div",{className:1===s||2===s?"red value":"black value"},k[t%O]),N[s](.235),a.a.createElement("div",{className:"large-shape"},N[s](.5))))):a.a.createElement("div",{className:c},a.a.createElement("div",{className:"card flip-down"},a.a.createElement("div",{className:"card-inner"})))};var Je=function(e){return e?Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.map(function(e){return e.trick}))):null},Ve=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ze=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={fadeOutCards:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Ve(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.order!==e.order&&(this.props.order%4==3?setTimeout(function(){return t.setState({fadeOutCards:!0})},2e3):this.setState({fadeOutCards:!1}))}},{key:"render",value:function(){var e=["south-card","west-card","north-card","east-card"],t=this.props,n=(t.order,t.cards),r=t.cardsByPlayer;t.isTrickFinish;if(!n)return null;var i=null,o=Je(n);return 0===o&&(o=1),r&&!this.state.fadeOutCards&&(i=r.map(function(t,n){var r=(t=t.sort(function(e,t){return e.value-t.value})).map(function(e,t){if(e.trick===o)return a.a.createElement(Ye,{key:"trick-card-x-index-"+n+"-"+t+"-"+e.trick,value:e.value})});return r.filter(function(e){return null!==e&&void 0!==e}).length>0?a.a.createElement("div",{className:"trick-card-wrapper "+e[n],key:"trick-card-"+n},r):null})),i&&(i=i.filter(function(e){return null!==e&&void 0!==e})),a.a.createElement("div",{className:"trick-area"},a.a.createElement("div",{className:"trick-area-inner"},i))}}]),t}(),qe=(n(60),function(e){var t=0,n=0;return e.map(function(e,r){var a=e.isWin?1:0;r%4%2==0?t+=a:n+=a}),{teamA:t,teamB:n}}),Qe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Xe=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Qe(t,[{key:"render",value:function(){var e=this.props,t=e.table,n=e.windowWidth,r=(e.windowHeight,e.currentUser),i=t.game,o=t.players;if(!t||!t.game.cards)return null;var l=t.playerInfo,s=qe(i.cards),c=o.map(function(e){return l[e].displayName}),u=this.props.innerStyle,f=this.props.ratio||.15,p=(this.props.thumbnailSize,this.props.thumbnailSize,1.2*this.props.thumbnailSize);return a.a.createElement("div",{className:this.props.name?"trick-score "+this.props.name:"trick-score",style:u},a.a.createElement("div",{className:"trick-score-inner",style:{width:n*f}},a.a.createElement("div",{className:"group-wrapper"},a.a.createElement("div",{className:"group"},a.a.createElement(De,{styleObj:{minWidth:2*p},teamOrder:0,players:c,size:p,offset:3,currentUser:r}),a.a.createElement("div",{className:"score"},s.teamA)),a.a.createElement("div",{className:"group"},a.a.createElement(De,{styleObj:{minWidth:2*p},teamOrder:1,players:c,size:p,offset:3,currentUser:r}),a.a.createElement("div",{className:"score"},s.teamB))),this.props.children))}}]),t}(),$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var et=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.recordGame=n.recordGame.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),$e(t,[{key:"recordGame",value:function(){var e=this.props.table,t=e.game;e&&51===t.order&&D("CREATE_NEW_GAME",{table:e})}},{key:"render",value:function(){var e=this.props,t=(e.windowWidth,e.table,e.windowHeight,e.currentUser),n=this.props.table,r=n.game,i=n.players;if(!r||!r.cards)return null;var o=i.indexOf(t.uid),l=0;r.cards.map(function(e,t){var n=e.isWin?1:0;e.player%2==o%2?l+=n:n});var s=null,c=r.bid,u=c.declarer,f=c.trick,p=o>=0,d=!1;o%2==u%2&&l>=6+(f+1)?(s=_,d=!0):s=p?T:"";var m=p?a.a.createElement("button",{onClick:this.recordGame,className:"btn"},"ÂÜç‰æÜ‰∏ÄÂ±Ä"):"ÊØîË≥ΩÁµêÊùü";return a.a.createElement("div",{className:d?"game-over-board win":"game-over-board lose"},a.a.createElement(Xe,{currentUser:this.props.currentUser,ratio:.5,thumbnailSize:46,windowWidth:this.props.windowWidth,widnowHeight:this.props.windowHeight,table:this.props.table},a.a.createElement("div",{className:"game-over-board-inner"},a.a.createElement("div",{className:"result"},a.a.createElement("div",{className:"words"},s)),a.a.createElement("div",{className:"btn-wrapper"},m))))}}]),t}(),tt=function(e){var t=e.result,n=e.scale;if(!t)return null;var r=t.length;return a.a.createElement("div",{className:"record"},Array.from({length:Math.ceil(r/4)}).fill(0).map(function(e,r){return a.a.createElement("div",{key:He(),className:"row"},Array.from({length:4}).fill(0).map(function(e,i){var o=t[4*r+i];return o&&o.opt?a.a.createElement("div",{key:He(),className:"bid-result"},o.opt):o&&o.trick>=0?a.a.createElement("div",{key:He(),className:"bid-result"},a.a.createElement("div",null,o.trick+1),N[o.trump](n)):a.a.createElement("div",{key:He(),className:"bid-result"},null)}))}))},nt=(n(18),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var rt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.game;return n.state={currentTrick:r.bid.trick,visibility:!1,current:null},n.updateBid=n.updateBid.bind(n),n.validateUserTurnAndsetTrump=n.validateUserTurnAndsetTrump.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),nt(t,[{key:"validateUserTurnAndsetTrump",value:function(e){var t=this,n=this.props,r=n.game,a=n.currentUser,i=n.players;a&&r&&(i&&a&&i.findIndex(function(e){return e===t.props.currentUser.uid})===r.deal&&this.setState({currentTrick:e,current:e,visibility:!0}))}},{key:"updateBid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=void 0,r=this.props.game.bid.declarer,a=this.props.game.bid.result||[];if(e>-1&&null!==e){var i={trick:this.state.currentTrick,trump:e};a.push(Object.assign({},i)),r=this.props.game.deal,n=Object.assign({},this.props.game.bid,i,{declarer:r},{result:a})}else{if(a.push({opt:t}),a.length>=4){var o=a.slice(a.length-4,a.length).every(function(e){return"Pass"===e.opt}),l=a.some(function(e){return e.trump>=0});o&&l}n=Object.assign({},this.props.game.bid,{result:a})}var s=this.props.game.deal,c=Object.assign({},this.props.game,{bid:n},{deal:(s+1)%4});D("UPDATE_AUCTION",{table:this.props.table,game:c}),this.setState({visibility:!1,current:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.game,r=t.players,i=t.currentUser,o=this.props.table.playerInfo,l=r&&r[n.deal]===this.props.currentUser.uid,s=5*n.bid.trick+n.bid.trump,c=void 0,u=void 0;s<0?(c=Array.from({length:7}).fill(0).map(function(e,t){return t}),u=Array.from({length:5}).fill(0).map(function(e,t){return t})):34===s?(c=[],u=[]):s%5==4&&0!==s?(c=Array.from({length:7}).fill(0).map(function(e,t){return t}).filter(function(e){return e>n.bid.trick}),u=Array.from({length:5}).fill(0).map(function(e,t){return t})):(c=Array.from({length:7}).fill(0).map(function(e,t){return t}).filter(function(e){return e>=n.bid.trick}),u=Array.from({length:5}).fill(0).map(function(e,t){return t}).filter(function(e){return e>n.bid.trump}));var f=c.map(function(t,n){return a.a.createElement("button",{className:t===e.state.current?"current":null,onClick:function(){e.validateUserTurnAndsetTrump(t)},key:He()},t+1)}),p=this.state.currentTrick===c[0]?u:[0,1,2,3,4];34===s&&(p=[]),p=p.map(function(t){return a.a.createElement("div",{onClick:function(){return e.updateBid(t,null)},key:He()},N[t](.25))});var d=n.bid.result,m=d&&!d[d.length-1].opt&&a.a.createElement("button",{className:"d-btn",onClick:function(){return e.updateBid(-1,"Double")}},"Dboule"),h=d&&"Double"===d[d.length-1].opt&&a.a.createElement("button",{className:"d-btn",onClick:function(){return e.updateBid(-1,"ReDouble")}},"ReDouble"),b=r.map(function(t,n){return a.a.createElement("div",{key:"auction-thumbnail-"+n,className:n===e.props.game.deal?"default-thumbnail current":"default-thumbnail"},a.a.createElement("div",{className:"default-thumbnail-inner"},a.a.createElement("div",{className:"default-thumbnail-inner-outline-wrapper"},a.a.createElement("div",{className:"default-thumbnail-inner-outline"},a.a.createElement(Ie,{size:53,current:n===e.props.game.deal,name:o[t].displayName}))),a.a.createElement("span",null,o[t].displayName)))});if(this.props.isFinishAuction)return null;r.includes(i.uid);return a.a.createElement("div",{className:"auction-inner"},a.a.createElement("div",{className:"thumbnail-group"},b),!n.bid.result&&a.a.createElement("div",{className:"notes"}," Start Auction "),a.a.createElement(tt,{scale:.2,result:n.bid.result}),a.a.createElement("div",{className:"option-wrapper"},l&&a.a.createElement("div",{className:"other-btns"},a.a.createElement("button",{className:"pass",onClick:function(){return e.updateBid(null,"Pass")}},"Pass"),m,h),a.a.createElement("div",{className:"tricks"},f),this.state.visibility&&a.a.createElement("div",{className:"trumps"},p)))}}]),t}(),at=(n(57),function(e){var t=e.name,n=e.current,r=void 0===n?null:n;return a.a.createElement("div",{className:r?"player current":"player"},a.a.createElement("div",{className:"player-inner"},a.a.createElement(Ie,{robotOffset:-7,styleName:"border-thumbnail",size:r?40:50,offset:5,name:t,border:r})),a.a.createElement("div",{className:"name"},t))}),it=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ot=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),it(t,[{key:"render",value:function(){var e=this.props,t=e.table,n=e.windowWidth,r=e.currentUser,i=(e.windowHeight,t.game),o=t.playerInfo,l=t.players;if(!i||!i.bid.result)return null;var s=l.map(function(e,t){return r.uid===e?a.a.createElement(Se,{key:"resultThumbnail-"+t,name:o[e].displayName,size:30,isCurrentUser:!0,offset:5}):a.a.createElement(Ie,{key:"resultThumbnail-"+t,name:o[e].displayName,size:30,offset:5})});return a.a.createElement("div",{className:"auction-result",style:{top:5*Math.ceil(n/500),right:5*Math.ceil(n/500)}},a.a.createElement("div",{className:"auction-result-inner"},a.a.createElement("div",{className:"thumbnail-group"},s),a.a.createElement(tt,{scale:.15,result:i.bid.result})))}}]),t}();function lt(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var st=function(e){if(e)return[0,0,0,0].map(function(t,n){return e.filter(function(e,t){return t%4===n})}).slice(0)},ct=function(){for(var e=Array.from({length:w}).fill(0).map(function(e,t){return t}),t=e.length-1;t>0;t--){var n=Fe(0,w-1),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}return e},ut=function(e){return function(e){return st(e).map(function(e){return e.map(function(e){return e%13>8?e%13-8:0})})}(e).every(function(e){return e.reduce(function(e,t){return t+e},0)>=7})},ft=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();var pt=function(e,t){if(e&&null!==t&&void 0!==t){var n=e.filter(function(e){return Math.floor(e.value/O)===t}).sort(function(e,t){return t.value-e.value});return n.length?n[0]:null}},dt=function(e,t){if(e){var n=e.cards,r=Je(n),a=e.bid.trump,i=n.map(function(e,t){return Object.assign({},e,{index:t})}).filter(function(e){return e.trick===r&&e.trick>0||e.value===t}),o=void 0,l=!1;if(4===i.length){var s=Math.min.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i.map(function(e){return e.order}))),c=i.filter(function(e){return e.order===s}),u=ft(c,1)[0];if(4!==a){var f=pt(i,a);null!==f?o=f:l=!0}if(4===a||l){var p=Math.floor(u.value/O);o=pt(i,p)}}return o||null}},mt=(n(85),n(135),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var ht=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setReadyState=n.setReadyState.bind(n),n.checkReadyState=n.checkReadyState.bind(n),n.startGame=n.startGame.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),mt(t,[{key:"startGame",value:function(){this.props.table&&D("START_GAME",{currentUser:this.props.currentUser,table:this.props.table})}},{key:"checkReadyState",value:function(){var e=this.props,t=e.table,n=(e.currentUser,t.game,t.ready);t.players,t.playerInfo;return n.every(function(e){return!1===e})}},{key:"setReadyState",value:function(e){var t=this.props,n=(t.currentUser,t.table);if(n){n.game,n.gameState,n.players.slice(0);D("READY_A_PLAYER",{playerIndex:e,table:n})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.table,r=t.currentUser,i=n.game,o=n.ready,l=n.players,s=n.playerInfo;if(!i)return a.a.createElement("div",null," No game data ");i.isGameOver;var c=i.order,u=l.some(function(e){return-1===e}),f=o.every(function(e){return!0===e});if(!(u&&c<0||!f))return null;var p=null,d=l.map(function(e,t){var n=void 0;return s[e]&&(n=s[e].displayName),n?a.a.createElement("div",{key:"join-player-"+t,className:"player-ready-wrapper"},a.a.createElement(Se,{isCurrentUser:l[t]===r.uid,size:70,offset:0,disabled:!o[t],name:n}),a.a.createElement("span",null,n)):a.a.createElement("div",{key:"join-plyaer-"+t,className:"player-ready-wrapper"},a.a.createElement(Le,{size:70}),a.a.createElement("span",null,"Á≠âÂÄô‰∏≠"))}),m=void 0,h=r.uid===l[0];l.includes(r.uid)&&(m=l.some(function(e,t){return e===r.uid&&!o[t]}),p=l.map(function(t,n){return t!==r.uid||o[n]?a.a.createElement("div",{key:"playBtn-"+n}):a.a.createElement("div",{key:"playBtn-"+n},a.a.createElement("br",null),a.a.createElement("button",{style:{zIndex:5},onClick:function(){return e.setReadyState(n)},className:"btn"},"Âä†ÂÖ•ÁâåÂ±Ä"))}));var b=a.a.createElement("button",{onClick:this.startGame,className:"btn"},"ÈñãÂßãÁâåÂ±Ä"),y=""+n.linkId,v="Ê°åËôü "+y.slice(y.length-3,y.length),g=h?"Êåâ‰∏ãÊñπÊåâÈàïÁ´ãÂç≥ÈñãÂßãÁâåÂ±Ä":"Á≠âÂÄôÂÖ∂‰ªñÁé©ÂÆ∂‰∏≠...";return a.a.createElement("div",{className:"player-ready-list"},a.a.createElement("div",{className:"player-ready-list-inner"},a.a.createElement("h3",null,a.a.createElement("span",null,v)),a.a.createElement("div",{className:"row"}," ",d),!m&&a.a.createElement("div",{className:"waiting-info"},g),a.a.createElement("div",{className:"btn-wrapper"},m&&p,h&&b)))}}]),t}(),bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var yt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.table.game;return n.state={endAuction:r&&r.order>=0,windowWidth:window.innerWidth,windowHeight:window.innerHeight},n.deal=n.deal.bind(n),n.getNextMaxTrick=n.getNextMaxTrick.bind(n),n.shuffle=n.shuffle.bind(n),n.suffleCardsWhenReady=n.suffleCardsWhenReady.bind(n),n.endAuction=n.endAuction.bind(n),n.handleResize=n.handleResize.bind(n),n.getAuctionStatus=n.getAuctionStatus.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),bt(t,[{key:"handleResize",value:function(){this.setState({windowWidth:window.innerWidth,height:window.innerHeight})}},{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e){this.props.table,e.table;this.suffleCardsWhenReady()}},{key:"suffleCardsWhenReady",value:function(){var e=this.props.table,t=e.players,n=e.game,r=e.gameState;t&&(t.some(function(e){return-1===e})||n.cards||r!==A||this.shuffle())}},{key:"getNextMaxTrick",value:function(){var e=this.props.table.game;if(e){var t=e.cards,n=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.map(function(e){return e.trick}))),r=t.filter(function(e){return e.trick===n}).length;return 0===n||r>=4?n+1:n}}},{key:"endAuction",value:function(){this.setState({endAuction:!0})}},{key:"deal",value:function(e){console.log("value",e);var t=this.props.table,n=this.props.table.game;if(n){n.deal;var r=n.order+1;D("UPDATE_CURRENT_TRICK",Object.assign({},{table:t,value:e,time:(new Date).getTime(),maxTrick:this.getNextMaxTrick(),order:r,deal:(n.deal+1)%4}));var a=dt(n,e);if(a){var i=Object.assign({},a);delete i.index,D("UPDATE_WINNER_CARD",Object.assign({},this.props,{table:t,winnerCard:i,order:r,deal:i.player}))}}}},{key:"shuffle",value:function(){var e=function(){for(var e=ct();!ut(e);)e=ct();return e}();e=e.map(function(e){return{value:e,trick:0}}),D("ADD_NEW_DECK_TO_TABLE",{table:this.props.table,cards:e})}},{key:"getAuctionStatus",value:function(e){var t=e.bid.result;return!(!e||!t)&&(t.length>=4&&e.bid.trump>=0&&t.slice(t.length-4,t.length).every(function(e){return"Pass"===e.opt}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.table,r=t.currentUser,i=n.game,o=n.players,l=(n.ready,i.cards),s=i.isGameOver,c=i.order%4==3,u=this.getAuctionStatus(i),f=u&&!0,p=void 0,d=function(e,t,n){if(t&&t.cards){var r=t.cards,a=e.map(function(t,n){return r.filter(function(t,r){return r%e.length===n})}).slice(0),i=e.findIndex(function(e){return e===n});return-1!==i?{cardsByPlayer:[].concat(lt(a.slice(i)),lt(a.slice(0,i))),offsetPlayers:[].concat(lt(e.slice(i)),lt(e.slice(0,i))),offsetIndex:i}:{cardsByPlayer:a,offsetPlayers:e.slice(0),offsetIndex:i}}}(o,i,r.uid)||{},m=d.cardsByPlayer,h=d.offsetPlayers;d.offsetIndex;if(l&&l.length===w){o.findIndex(function(e){return e===r.uid});var b=f?(i.bid.declarer+2)%4:6;b<4&&(b=h.findIndex(function(e){return e===o[b]}));var y=o[i.deal],v=o.includes(r.uid);p=m.map(function(t,l){var s=h[l],c=l;0===b&&(b=2),t=t.sort(function(e,t){return e.value-t.value}).filter(function(e){return 0===e.trick}),1===c&&1!==b&&(t=t.sort(function(e,t){return t.value-e.value}));var p=[[],[],[],[]];if(t.map(function(e){return Object.assign({},e)}).map(function(e){return p[Math.floor(e.value/O)].push(e)}),p=p.filter(function(e){return 0!==e.length}),0!==c&&c!==b&&v){var d=function(e){if(e){var t=e.flat(),n=t.length;if(n<=5){var r=Math.floor(n/2);return[t.slice(0,r),t.slice(r,n)]}var a=[[],[],[]];return t.map(function(e,t){return a[t%3].push(e)}),a}}(p);d&&(p=d)}var m=function(e){return e&&e.cards&&e.cards.length>=4&&e.order%4!=3?e.cards.filter(function(e){return e.order%4==0}).sort(function(e,t){return t.order-e.order})[0]:null}(i),g=function(e,t){return!!t&&e&&t.filter(function(t){return Math.floor(t.value/O)===Math.floor(e.value/O)}).length>0}(m,p.flat()),E=p.map(function(t,n){var l=i.bid.declarer,p=o[(l+2)%4],d=o[l],h=u&&v,E=h&&y===s&&0===c;f&&h&&p===y&&(r.uid===d&&2===c&&(E=!0),r.uid===p&&0===c&&(E=!1));var w=!v||0===c||c===b,_=function(e){return null===m||!g||Math.floor(e.value/O)===Math.floor(m.value/O)};return t.map(function(t,r){return a.a.createElement(Ke,{name:E&&_(t)?"click-able l"+n+" item-"+r:"l"+n+" item-"+r,flipUp:w,evt:E&&_(t)?e.deal:null,key:"card-random-"+r,value:t.value})})}),w=E.map(function(e){return e.length}).reduce(function(e,t){return e+t},0),_=E.filter(function(e){return 0!==e.length}).length,T=e.state.windowWidth>=1200?380:300,N="north"===I[l]||"south"===I[l]?{left:(e.state.windowWidth-T-(40*w+40))/2}:null,k="west"===I[l]||"east"===I[l]?(e.state.windowHeight-function(e){return 125*e-55*(e-1)+10}(_))/2:null,P=void 0;return k&&"west"===I[l]&&(P={top:k}),k&&"east"===I[l]&&(P={top:k}),a.a.createElement("div",{className:I[l],style:N||P,key:"player-hand-index-"+l},a.a.createElement("div",{className:"hand-inner"},a.a.createElement("div",{className:"user-hand"},E),a.a.createElement(at,{current:y===s&&u,name:n.playerInfo[s]&&n.playerInfo[s].displayName||"Anonymous"})))})}console.log(" this should show"),console.log("table",n);var g=n.ready.every(function(e){return!0===e});return console.log("isAllReady",g),s?(console.log(" this is game over"),a.a.createElement("div",{className:"game"},a.a.createElement("div",null,a.a.createElement(et,{startGame:this.suffleCardsWhenReady,currentUser:r,windowWidth:this.state.windowWidth,widnowHeight:this.state.windowHeight,table:n})))):a.a.createElement("div",{className:"game"},!g&&a.a.createElement(ht,{suffleCardsWhenReady:this.suffleCardsWhenReady,currentUser:r,table:n}),u&&a.a.createElement(ot,{currentUser:r,windowWidth:this.state.windowWidth,windowHeight:this.state.windowHeight,table:n}),a.a.createElement("div",{className:"auction"},i.bid&&i.cards&&a.a.createElement(rt,{isFinishAuction:u,endAuction:this.endAuction,game:i,table:n,currentUser:r,players:o})),a.a.createElement("div",{className:"arena"},a.a.createElement("div",{className:"hands"},p),a.a.createElement(Ze,{cards:l,cardsByPlayer:m,order:i.order,isTrickFinish:c}),a.a.createElement(Xe,{currentUser:r,resizeRatio:.15,innerStyle:{bottom:5*Math.ceil(this.state.windowWidth/500),right:5*Math.ceil(this.state.windowWidth/500)},thumbnailSize:30,name:"right-bottom-pos",windowWidth:this.state.windowWidth,widnowHeight:this.state.windowHeight,table:this.props.table})))}}]),t}(),vt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var gt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),vt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.index,r=t.record,i=t.current;if(!r)return a.a.createElement("div",{className:"record-item"},a.a.createElement("div",{className:"empty"}));var o=qe(r.cards);return a.a.createElement("div",{onClick:function(){return e.props.changeRecord(n)},className:i?"record-item active current":"record-item active"},a.a.createElement("div",null,n+1),a.a.createElement("div",{className:"bid"},a.a.createElement("span",null,r.bid.trick+1),N[r.bid.trump](.15)),a.a.createElement("div",null,o.teamA),a.a.createElement("div",null,o.teamB))}}]),t}(),Et=function(e){var t=e.current,n=e.page,r=e.changePage;return a.a.createElement("div",{onClick:function(){return r(n)},className:t?"dot current":"dot"})},wt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={page:0},n.changePage=n.changePage.bind(n),n}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,a.a.Component),wt(t,[{key:"changePage",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=this,t=this.props.record;if(!t)return a.a.createElement("div",{className:"record-empty"},"No available game records");var n=void 0,r=void 0,i=void 0;if(t){if(t.length<=3)t=t.concat([null,null,null]).slice(0,3);else{var o=3*this.state.page,l=o+3>=t.length?t.length:o+3;t=t.slice(o,l)}n=t.map(function(t,n){return a.a.createElement(gt,{key:"record-item-"+n,index:n,changeRecord:e.props.changeRecord,current:e.props.currentRecord===n,record:t})}),r=(i=Math.ceil(t.length/3))<=1?null:r=Array.from({length:i}).fill(0).map(function(t,n){return a.a.createElement(Et,{key:"dot-"+n,changePage:e.changePage,page:n,current:n===e.state.page})})}return a.a.createElement("div",{className:"record-list"},this.props.record&&a.a.createElement("div",{className:"record-header"},a.a.createElement("div",null),a.a.createElement("div",null),a.a.createElement(Re,{teamOrder:0,players:this.props.players,size:32}),a.a.createElement(Re,{teamOrder:1,players:this.props.players,size:32})),n,a.a.createElement("div",{className:"dots-holder"},a.a.createElement("div",{className:"dots-holder-inner"},r)))}}])}();var Ot=function(e){var t=e.player,n=e.cards,r=e.direction,i=[[],[],[],[]];n.map(function(e){return i[Math.floor(e.value/13)].push(e)});var o=i.map(function(e,t){return a.a.createElement("div",{className:"hand",key:"suit-"+t},a.a.createElement("div",null,N[t](.15)),a.a.createElement("div",{className:"card-value"},e.map(function(e,t){return a.a.createElement("div",{key:"suit-"+t},k[e.value%O])})))});return a.a.createElement("div",{className:"rewind-player "+r},a.a.createElement("div",null,a.a.createElement(Ie,{name:t,size:26})),a.a.createElement("div",{className:"hand-wrapper"},o))},_t=function(e){var t=e.players,n=e.bid,r=n.declarer,i=n.trump,o=n.trick;return a.a.createElement("div",{className:"rewind-auction"},a.a.createElement("h3",null,"Auction"),a.a.createElement("div",null,a.a.createElement(Ie,{name:t[r],size:26})),a.a.createElement("div",null,o+1," ",N[i](.15)))},Tt=function(e){var t=e.players,n=e.cards,r=qe(n);return a.a.createElement("div",{className:"rewind-result"},a.a.createElement("h3",null,"Result"),a.a.createElement("div",null,a.a.createElement(Re,{teamOrder:0,players:t,size:20}),a.a.createElement("div",null,r.teamA)),a.a.createElement("div",null,a.a.createElement(Re,{teamOrder:1,players:t,size:20}),a.a.createElement("div",null,r.teamB)))},Nt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,a.a.Component),Nt(t,[{key:"render",value:function(){var e=this;if(!this.props.record)return null;var t=this.props.record,n=t.cards,r=t.bid,i=st(n).map(function(t,n){return a.a.createElement(Ot,{direction:I[n],key:"hand-"+n,cards:t,player:e.props.players[n]})});return a.a.createElement("div",{className:"rewind"},i,a.a.createElement(_t,{players:this.props.players,bid:r}),a.a.createElement(Tt,{players:this.props.players,cards:n}),a.a.createElement("div",null))}}])}();var kt=n(105),Pt=n.n(kt),Ct=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var jt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={message:""},n.sendMessage=n.sendMessage.bind(n),n.handleChange=n.handleChange.bind(n),n.handleKeyPress=n.handleKeyPress.bind(n),n.addEmoji=n.addEmoji.bind(n),n.msgEnd,n.emoji=S,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Ct(t,[{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.sendMessage()}},{key:"componentDidMount",value:function(){this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"addEmoji",value:function(e){this.setState({message:this.state.message+e})}},{key:"sendMessage",value:function(e){D("SEND_MESSAGE_TO_CHATROOM",{message:this.state.message,currentUser:this.props.currentUser,table:this.props.table}),this.setState({message:""})}},{key:"handleChange",value:function(e){this.setState({message:e.currentTarget.value})}},{key:"scrollToBottom",value:function(){var e=this;setTimeout(function(){e.msgEnd.scrollIntoView({behavior:"smooth",block:"end"})},10)}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentUser,r=t.table,i=t.chatroom;if(!r||!n)return null;var o=r.players,l=void 0,s=this.emoji.map(function(t,n){return a.a.createElement("a",{key:"emj-"+n,className:"emjbtn",onClick:function(){return e.addEmoji(t)}},t)});if(i&&i.message&&r&&r.viewers){Object.keys(i.message).length;l=(o.some(function(e){return e===n.uid})?Object.keys(i.message).sort(function(e,t){return+e-+t}).filter(function(e){return i.message[e].isPlayer}):Object.keys(i.message).sort(function(e,t){return+e-+t})).map(function(e,t){var n=r.viewers[i.message[e].uid],l=null,s=o.findIndex(function(t){return t===i.message[e].uid});s>-1&&(l=a.a.createElement("div",{style:{backgroundColor:n},className:"symbol"},N[s](.1,"#ffffff")));var c=i.message[e].content;return a.a.createElement("div",{className:"msg",key:"message-"+t},a.a.createElement("a",null,l,a.a.createElement("b",{style:{color:n}},i.message[e].displayName," ",a.a.createElement("b",{className:"comma"},":")),c))})}return a.a.createElement("div",{className:"chatroom"},a.a.createElement("div",{className:"msg-wrapper"},l,a.a.createElement("div",{ref:function(t){e.msgEnd=t},style:{float:"left",clear:"both"}},a.a.createElement("i",null))),a.a.createElement("div",{className:"typing-area"},a.a.createElement("textarea",{placeholder:"type something...",rows:"10",col:"50",value:this.state.message,onChange:this.handleChange,onKeyPress:this.handleKeyPress}),a.a.createElement("div",{className:"emoji"},s),a.a.createElement("button",{onClick:this.sendMessage},"ÈÄÅÂá∫")))}}]),t}(),At=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ut=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=n.props.table.record;return n.state={tab:0,currentRecord:r?r.length-1:null},n.changeRecord=n.changeRecord.bind(n),n.handleTab=n.handleTab.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),At(t,[{key:"changeRecord",value:function(e){this.setState({currentRecord:e})}},{key:"handleTab",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){return this.props.table?a.a.createElement("div",{className:"sidebar"},a.a.createElement("div",{className:"tabs",style:{marginLeft:30}},a.a.createElement("div",{className:"current chatroom"},a.a.createElement("span",null),a.a.createElement("b",null,"chatroom"))),a.a.createElement("div",{className:"tab-wrapper"}),a.a.createElement("div",null,a.a.createElement(jt,{currentUser:this.props.currentUser,chatroom:this.props.chatroom,table:this.props.table}))):null}}]),t}(),It=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var St=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.linkId=t,this.id=n,this.get()}return It(e,[{key:"get",value:function(){var e=this;u.getChatRoomById(this.id).then(function(t){e.update(t),e.listenChanged()})}},{key:"update",value:function(e){R("UPDATE_CHAT_ROOM",{chatroom:e})}},{key:"listenChanged",value:function(){var e=this;u.getNodeByPath("chatroom/"+this.id+"/",function(t){return e.update(t.val())})}}]),e}(),Rt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Dt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.linkId=t,this.get()}return Rt(e,[{key:"get",value:function(){var e=this;return u.getTableByLinkId(this.linkId).then(function(t){return e.chatroom=new St(e.linkId,t.id),e.update(t),e.listenTableChange(t),t})}},{key:"update",value:function(e){R("UPDATE_TABLE_DATA",{table:e})}},{key:"listenTableChange",value:function(e){var t=this;u.getNodeByPath("tables/"+e.id+"/",function(e){return t.update(e.val())})}}]),e}(),Lt=n(138),xt=n.n(Lt),Bt=(n(139),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Mt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Bt(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"main-loading"},a.a.createElement("div",{className:"loading-anim"},a.a.createElement("img",{src:xt.a})))}}]),t}(),Wt=(n(88),n(90),n(92),n(94),n(96),n(98),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var zt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.linkId=n.props.match.params.id||window.location.hash.slice(8),n.state={isLoad:!1,canRedirect:!1,isClosed:!1},n.addPlayerToTable=n.addPlayerToTable.bind(n),n.color=Pt()("dark"),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Wt(t,[{key:"componentDidMount",value:function(){var e=this;this.model=new Dt(this.linkId);var t=this.props.currentUser;this.model.get().then(function(n){e.id=n.id,e.setState({isLoad:!0}),n.players.includes(t.uid)||e.addPlayerToTable(n)}),this.props.currentUser||u.getCurrentUser()}},{key:"addPlayerToTable",value:function(e){var t=e.players,n=e.viewers,r=this.props.currentUser,a=t.findIndex(function(e){return-1===e}),i=t.some(function(e){return-1===e})&&t.every(function(e){return e!==r.uid}),o=Boolean(!n||!n[r.uid]);i?D("ADD_PLAYER_TO_TABLE",{currentUser:r,table:e,emptySeatIndex:a,color:this.color}):o&&D("ADD_VIEWER_TO_TABLE",{currentUser:r,table:e,color:this.color})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.tableList,a=n.tables,i=n.currentTableId;if(r){i!==e.currentTableId&&(this.setState({isLoad:!1}),this.model.get().then(function(e){return t.setState({isLoad:!0})}));var o=this.id,l=this.linkId;r[l]&&r[l].id&&a[o]!==e.tables[o]&&this.addPlayerToTable(a[o])}}},{key:"render",value:function(){var e=this.state,t=e.canRedirect,n=e.isLoad;if(t)return a.a.createElement(l.a,{to:"/login"});if(!n)return a.a.createElement(Mt,null);var r=this.props,i=r.tables,o=r.currentUser,s=r.chatroom,c=this.id;if(!i||!c)return null;var u=i[c];return u.gameState&&u.gameState===U?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",null,a.a.createElement(We,{roomNum:this.linkId||null,isTableColor:!0,getUserAuthInfo:this.props.getUserAuthInfo,currentUser:o}),a.a.createElement("div",{className:"table"},a.a.createElement(yt,{currentUser:o,currentTableId:this.props.currentTableId,table:u}),a.a.createElement(Ut,{currentUser:o,chatroom:s,table:u})))}}]),t}(),Gt=(n(52),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var Ht=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.createTable=n.createTable.bind(n),n.setCurrentTable=n.setCurrentTable.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Gt(t,[{key:"createTable",value:function(e){this.props.currentUser?(D("CREATE_TABLE",{tableRef:e,currentUser:this.props.currentUser}),this.setCurrentTable(e)):console.log(" no user login")}},{key:"setCurrentTable",value:function(e){this.props.currentUser&&R("UPDATE_CURRENT_TABLE_ID",{currentTableId:e})}},{key:"render",value:function(){var e=this,t=this.props.tableList,n=void 0;if(t){n=Object.keys(t).filter(function(e){return t[e].players?t[e].players.some(function(e){return-1===e}):!t[e].players}).map(function(t,n){var r=t.slice(t.length-3,t.length),i=e.props.tableList[t].players,o=e.props.tableList[t].playerInfo,l=i?i.filter(function(e){return-1===e}).length:3,s=o[i[0]].displayName;return a.a.createElement("div",{className:"table-list-item",key:"tablelist-item-"+n+"}"},a.a.createElement("div",{className:"room-number"},a.a.createElement("span",null,r)),a.a.createElement("div",null,s),a.a.createElement("div",{className:"empty-seats"},l," "),a.a.createElement("div",null,a.a.createElement(f.a,{className:"btn-style-border",onClick:function(){return e.setCurrentTable(t)},key:t,to:e.props.currentUser?"/table/"+t:"/login"},"Âä†ÂÖ•")))})}var r=(new Date).getTime(),i=this.props.currentUser&&this.props.openBtn&&a.a.createElement(f.a,{className:"btn-style-border",onClick:function(){return e.createTable(r)},to:this.props.currentUser?"/table/"+r:"/login"},"ÊàëË¶ÅÈñãÊ°å");return a.a.createElement("div",{className:"table-list"},this.props.title&&a.a.createElement("h4",null,this.props.title),a.a.createElement("div",{className:"table-list-header"},a.a.createElement("div",null,"ÊàøËôü"),a.a.createElement("div",null,"Ê°åÈï∑"),a.a.createElement("div",null,"Á©∫‰Ωç"),a.a.createElement("div",{className:"open-table-section"},i)),a.a.createElement("div",{className:"table-list-item-group"},n))}}]),t}(),Ft=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Yt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.createTable=n.createTable.bind(n),n.setCurrentTable=n.setCurrentTable.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Ft(t,[{key:"createTable",value:function(e){D("CREATE_TABLE",{tableRef:e,currentUser:this.props.currentUser})}},{key:"setCurrentTable",value:function(e){this.props.currentUser&&R("UPDATE_CURRENT_TABLE_ID",{currentTableId:e})}},{key:"render",value:function(){var e=this,t=this.props.tableList,n=void 0;t&&(n=Object.keys(t).filter(function(e){return t[e].players&&!t[e].players.some(function(e){return-1===e})}).map(function(t,n){var r=e.props.tableList[t],i=r.players,o=r.playerInfo,l=i.map(function(e,t){return a.a.createElement("div",{key:"playerSeat-"+t},o[e]?o[e].displayName:"Anonymous")});return a.a.createElement("div",{className:"playing-table",key:"playing-table-item-"+n+"}"},a.a.createElement("div",{className:"room-number"},a.a.createElement("span",null,t.slice(t.length-3,t.length))),l,a.a.createElement("div",null,a.a.createElement(f.a,{onClick:function(){return e.setCurrentTable(t)},className:"btn-style-border",to:e.props.currentUser?"/table/"+t:"/login"},"ËßÄË≥û")))}));return a.a.createElement("div",{className:"table-list"},a.a.createElement("h4",null,this.props.title),a.a.createElement("div",{className:"table-list-header playing-table-header"},a.a.createElement("div",null,"ÊàøËôü"),a.a.createElement("div",null,"Âçó"),a.a.createElement("div",null,"Ë•ø"),a.a.createElement("div",null,"Âåó"),a.a.createElement("div",null,"Êù±"),a.a.createElement("div",null)),a.a.createElement("div",{className:"table-list-item-group"},n))}}]),t}(),Kt=(n(101),n(53)),Jt=n.n(Kt),Vt=n(59),Zt=n.n(Vt),qt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Qt=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),qt(t,[{key:"render",value:function(){return this.props.isLoad?a.a.createElement("div",null,a.a.createElement(We,{getUserAuthInfo:this.props.getUserAuthInfo,currentUser:this.props.currentUser}),a.a.createElement("div",{className:"lobby"},a.a.createElement("div",{className:"lobby-title"},a.a.createElement("h2",null," ÈçõÈçäËÖ¶ÂäõÁöÑÊúÄ‰Ω≥Ê¥ªÂãï ",a.a.createElement("br",null)," ",a.a.createElement("span",null,"ÊîØÊè¥Â§ö‰∫∫ÈÄ£Á∑öÔºåÂñÆÊ©üÁâàÈõªËÖ¶Â∞çÊà∞Ê®°Âºè"))),a.a.createElement("div",{className:"table-lists"},a.a.createElement("div",{className:"table-list-wrapper"},a.a.createElement("div",{className:"table-num"}),a.a.createElement("div",{className:"table-list-inner"},a.a.createElement("img",{src:Jt.a}),a.a.createElement(Ht,{title:"Êè™ÂíñÊâìÁâå",openBtn:!0,tables:this.props.tables,currentUser:this.props.currentUser,open:!0,tableList:this.props.tableList}))),a.a.createElement("div",{className:"table-list-wrapper"},a.a.createElement("div",{className:"table-num"}),a.a.createElement("div",{className:"table-list-inner"},a.a.createElement("img",{src:Zt.a}),a.a.createElement(Yt,{tables:this.props.tables,title:"ÁÜ±ÈñÄÁâåÊ°å",openBtn:!0,open:!1,currentUser:this.props.currentUser,tableList:this.props.tableList})))))):a.a.createElement(Mt,null)}}]),t}(),Xt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $t=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={name:"",email:"",password:"",confirm:"",agreement:!1,message:"",redirect:!1},n.handleSignUp=n.handleSignUp.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),Xt(t,[{key:"handleSignUp",value:function(){var e=this,t=u.auth,n=this.state,r=n.email,a=n.password,i=n.name;r&&a&&confirm&&t.createUserWithEmailAndPassword(r,a).then(function(n){Math.floor(20*Math.random());return e.props.updateUserInfo(n,{name:i,email:r}),t.onAuthStateChanged(function(e){if(e){var t={displayName:i,email:r};e.updateProfile(t),u.getDataByPathOnce("users/"+e.uid,function(n){n.val()||D("CREATE_USER",{uid:e.uid,userInfo:t})})}else console.log("no user uid")})}).then(function(t){return e.setState({redirect:!0})}).catch(function(t){return e.setState({message:t.message})})}},{key:"render",value:function(){var e=this;return this.state.redirect?a.a.createElement(l.a,{to:"/"}):a.a.createElement("div",null,a.a.createElement(We,{getUserAuthInfo:this.props.getUserAuthInfo,currentUser:this.props.currentUser}),a.a.createElement("div",{className:"singup-wrapper"},a.a.createElement("div",{className:"signup"},a.a.createElement("h2",null,"Ë®ªÂÜä"),a.a.createElement("div",null,a.a.createElement("h3",null,"Áé©ÂÆ∂ÂêçÁ®±"),a.a.createElement("input",{placeholder:"Ë´ãËº∏ÂÖ•Áé©ÂÆ∂ÂêçÁ®±",type:"text",onChange:function(t){e.setState({name:t.currentTarget.value,message:""})},value:this.state.name})),a.a.createElement("div",null,a.a.createElement("h3",null,"ÂØÜÁ¢º"),a.a.createElement("input",{placeholder:"Ë´ãËº∏ÂÖ•Ëá≥Â∞ë 6 ‰ΩçÊï∏",type:"password",onChange:function(t){e.setState({password:t.currentTarget.value,message:""})},value:this.state.password})),a.a.createElement("div",null,a.a.createElement("h3",null,"Á¢∫Ë™çÂØÜÁ¢º"),a.a.createElement("input",{placeholder:"Ë´ãËº∏ÂÖ•Ëá≥Â∞ë 6 ‰ΩçÊï∏",type:"password",onChange:function(t){e.setState({confirm:t.currentTarget.value,message:""})},value:this.state.confirm})),a.a.createElement("div",null,a.a.createElement("h3",null,"ÈõªÂ≠ê‰ø°ÁÆ±"),a.a.createElement("input",{type:"email",placeholder:"john@bridge.com",onChange:function(t){e.setState({email:t.currentTarget.value,message:""})},value:this.state.email})),a.a.createElement("div",null,a.a.createElement("div",{className:"error-text error-text-panel"},this.state.message),a.a.createElement("div",{className:"btn-group"},a.a.createElement("button",{onClick:this.handleSignUp,className:"btn-style-round"},"Ë®ªÂÜä"))))))}}]),t}(),en=n(68),tn=n(67),nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var an=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=L.getState(),n.update=n.update.bind(n),n.stopLoading=n.stopLoading.bind(n),n.updateUserInfo=n.updateUserInfo.bind(n),n.getUserAuthInfo=n.getUserAuthInfo.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),rn(t,[{key:"update",value:function(){this.setState(L.getState())}},{key:"componentDidMount",value:function(){this.unSubscribe=L.subscribe(this.update.bind(this)),this.stopLoading()}},{key:"componentDidUnMount",value:function(){this.unSubscribe()}},{key:"updateUserInfo",value:function(e,t){R("UPDATE_USER_INFO",{user:e,userInfo:t})}},{key:"getUserAuthInfo",value:function(){var e=this;return new Promise(function(t,n){u.auth.onAuthStateChanged(function(r){if(!r)return n(!0),e.stopLoading(),R("UPDATE_USER_INFO",{userInfo:null,user:null});u.getDataByPathOnce("users/"+r.uid,function(n){var a=n.val();t(a),e.stopLoading(),R("UPDATE_USER_INFO",{user:r,userInfo:n.val()})}),R("UPDATE_LOADING_STATE",{isLoad:!0})})})}},{key:"stopLoading",value:function(){R("UPDATE_LOADING_STATE",{isLoad:!0})}},{key:"render",value:function(){var e=this;return console.log("APP COMP--",this.state),this.state.isLoad?a.a.createElement("div",null,a.a.createElement(en.a,null,a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(tn.a,{path:"/login",exact:!0,render:function(t){return a.a.createElement(Ge,{getUserAuthInfo:e.getUserAuthInfo,currentUser:e.state.user})}}),a.a.createElement(tn.a,{exact:!0,path:"/signup",render:function(t){return a.a.createElement($t,nn({updateUserInfo:e.updateUserInfo,getUserAuthInfo:e.getUserAuthInfo,currentUser:e.state.user},t))}}),a.a.createElement(tn.a,{path:"/table/:id",render:function(t){return a.a.createElement(zt,nn({currentTableId:e.state.currentTableId,getUserAuthInfo:e.getUserAuthInfo,chatroom:e.state.chatroom,tables:e.state.tables,tableList:e.state.tableList,currentUser:e.state.user},t))}}),a.a.createElement(tn.a,{exact:!0,path:"/",render:function(){return a.a.createElement(Qt,{isLoad:e.state.isLoad,getUserAuthInfo:e.getUserAuthInfo,tables:e.state.tables||null,currentUser:e.state.user,tableList:e.state.tableList})}}))))):a.a.createElement(Mt,null)}}]),t}();o.a.render(a.a.createElement(an,null),document.getElementById("main"))},function(e,t,n){e.exports=n.p+"d78f81ef470d6731d6d27748d4890463.svg"},function(e,t,n){}],[[137,2,1]]]);
//# sourceMappingURL=main.2d94.js.map